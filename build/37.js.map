{"version":3,"sources":["../../src/core/login/pages/forgotten-password/forgotten-password.module.ts","../../src/core/login/pages/forgotten-password/forgotten-password.ts"],"names":[],"mappings":"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","file":"37.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { CoreLoginForgottenPasswordPage } from './forgotten-password';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n    declarations: [\n        CoreLoginForgottenPasswordPage\n    ],\n    imports: [\n        CoreDirectivesModule,\n        IonicPageModule.forChild(CoreLoginForgottenPasswordPage),\n        TranslateModule.forChild()\n    ]\n})\nexport class CoreLoginForgottenPasswordPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/forgotten-password/forgotten-password.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreLoginHelperProvider } from '../../providers/helper';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n/**\n * Page to recover a forgotten password.\n */\n@IonicPage({ segment: 'core-login-forgotten-password' })\n@Component({\n    selector: 'page-core-login-forgotten-password',\n    templateUrl: 'forgotten-password.html',\n})\nexport class CoreLoginForgottenPasswordPage {\n    myForm: FormGroup;\n    siteUrl: string;\n\n    constructor(private navCtrl: NavController, navParams: NavParams, fb: FormBuilder, private translate: TranslateService,\n            private loginHelper: CoreLoginHelperProvider, private domUtils: CoreDomUtilsProvider) {\n\n        this.siteUrl = navParams.get('siteUrl');\n        this.myForm = fb.group({\n            field: ['username', Validators.required],\n            value: [navParams.get('username') || '', Validators.required]\n        });\n    }\n\n    /**\n     * Request to reset the password.\n     *\n     * @param {Event} e Event.\n     */\n    resetPassword(e: Event): void {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const field = this.myForm.value.field,\n            value = this.myForm.value.value;\n\n        if (!value) {\n            this.domUtils.showErrorModal('core.login.usernameoremail', true);\n\n            return;\n        }\n\n        const modal = this.domUtils.showModalLoading('core.sending', true),\n            isMail = field == 'email';\n\n        this.loginHelper.requestPasswordReset(this.siteUrl, isMail ? '' : value, isMail ? value : '').then((response) => {\n            if (response.status == 'dataerror') {\n                // Error in the data sent.\n                this.showError(isMail, response.warnings);\n            } else if (response.status == 'emailpasswordconfirmnotsent' || response.status == 'emailpasswordconfirmnoemail') {\n                // Error, not found.\n                this.domUtils.showErrorModal(response.notice);\n            } else {\n                // Success.\n                this.domUtils.showAlert(this.translate.instant('core.success'), response.notice);\n                this.navCtrl.pop();\n            }\n        }).catch((error) => {\n            this.domUtils.showErrorModal(error);\n        }).finally(() => {\n            modal.dismiss();\n        });\n    }\n\n    // Show an error from the warnings.\n    protected showError(isMail: boolean, warnings: any[]): void {\n        for (let i = 0; i < warnings.length; i++) {\n            const warning = warnings[i];\n            if ((warning.item == 'email' && isMail) || (warning.item == 'username' && !isMail)) {\n                this.domUtils.showErrorModal(warning.message);\n                break;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/forgotten-password/forgotten-password.ts"],"sourceRoot":""}